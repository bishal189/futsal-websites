{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Contact Us | kanakai Futsal - Book Your Court in Jhapa, Nepal</title>
    <meta name="description"
        content="Get in touch with kanakai Futsal – Contact us for bookings, inquiries, or support. Visit our premium futsal courts in Jhapa, Nepal." />
    <meta name="keywords" content="kanakai Futsal, contact futsal Jhapa, futsal bookings Nepal, sports venue contact" />
    <meta name="author" content="kanakai Futsal" />
    <meta name="robots" content="index, follow" />

    <!-- Open Graph -->
    <meta property="og:title" content="Contact kanakai Futsal | Book Your Slot Today" />
    <meta property="og:description"
        content="Reach out to kanakai Futsal for futsal court bookings, support, and inquiries. We're located in Jhapa, Nepal." />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="{% static 'images/contact-preview.png' %}" />
    <meta property="og:url" content="https://kanakaifutsal.com/contact" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Contact kanakai Futsal" />
    <meta name="twitter:description" content="Book your futsal slot or reach us directly in Jhapa." />

    <!-- Favicon -->
    {% load static %}
    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'favicon_io/apple-touch-icon.png' %}" />
    <link rel="icon" type="image/png" sizes="32x32" href="{% static 'favicon_io/favicon-32x32.png' %}" />
    <link rel="icon" type="image/png" sizes="16x16" href="{% static 'favicon_io/favicon-16x16.png' %}" />
    <link rel="manifest" href="{% static 'favicon_io/site.webmanifest' %}" />

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'futsal-green': '#2D5016',
                        'futsal-light-green': '#4A7C59',
                        'futsal-orange': '#FF6B35',
                        'futsal-blue': '#1E40AF',
                        'futsal-gray': '#F8FAFC'
                    },
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', 'sans-serif']
                    }
                }
            }
        };
    </script>

    <!-- Alpine.js for interactivity -->
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>

    <!-- Animate.css for subtle effects -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />

    <!-- Fonts and Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
        rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />

    <style>
        /* Message notification styles */
        .message-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            min-width: 300px;
            max-width: 400px;
            padding: 16px 20px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            transform: translateX(500px);
            transition: transform 0.3s ease-in-out;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .message-notification.show {
            transform: translateX(0);
        }

        .message-success {
            background: linear-gradient(135deg, #10b981, #059669);
        }

        .message-error {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }

        .message-warning {
            background: linear-gradient(135deg, #f59e0b, #d97706);
        }

        /* Loading spinner */
        .loading-spinner {
            border: 2px solid #ffffff30;
            border-top: 2px solid #ffffff;
            border-radius: 50%;
            width: 16px;
            height: 16px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        /* Form submission states */
        .form-submitting {
            pointer-events: none;
            opacity: 0.7;
        }

        .btn-loading {
            position: relative;
        }

        .btn-loading .btn-text {
            opacity: 0;
        }

        .btn-loading .loading-spinner {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
    </style>
</head>

<body class="font-sans bg-white">
    <!-- Header -->
    {% include 'includes/header.html' %}

    <!-- Message Container -->
    <div id="message-container"></div>

    <!-- Welcome Section -->
    <section class="py-24 gradient-bg section-pattern relative overflow-hidden">
        <!-- Decorative Elements -->
        <div class="decorative-dot top-20 left-10 floating-element"></div>
        <div class="decorative-dot top-32 right-20 floating-element" style="animation-delay: 2s;"></div>
        <div class="decorative-dot bottom-20 left-1/4 floating-element" style="animation-delay: 4s;"></div>

        <!-- Subtle Background Shapes -->
        <div class="absolute top-10 left-10 w-32 h-32 bg-futsal-green/5 rounded-full blur-3xl"></div>
        <div class="absolute bottom-10 right-10 w-40 h-40 bg-futsal-orange/5 rounded-full blur-3xl"></div>

        <div class="container mx-auto px-4 relative z-10">
            <div class="max-w-5xl mx-auto text-center">
                <!-- Header -->
                <div class="mb-6">
                    <div
                        class="inline-flex items-center bg-white/60 backdrop-blur-sm rounded-full px-4 py-2 mb-6 border border-white/20">
                        <div class="w-2 h-2 bg-futsal-orange rounded-full mr-2 animate-pulse"></div>
                        <span class="text-futsal-green font-semibold text-sm uppercase tracking-wider">Premium
                            Experience</span>
                    </div>

                    <h2 class="text-4xl md:text-5xl font-black leading-tight mb-2">
                        Welcome to <span class="orange-gradient">kanakai Futsal</span>
                    </h2>

                    <!-- Decorative Line -->
                    <div class="flex items-center justify-center mt-4 mb-8">
                        <div class="h-1 w-16 bg-gradient-to-r from-futsal-green to-futsal-orange rounded-full"></div>
                        <div class="w-3 h-3 bg-futsal-orange rounded-full mx-3"></div>
                        <div class="h-1 w-16 bg-gradient-to-l from-futsal-green to-futsal-orange rounded-full"></div>
                    </div>
                </div>

                <!-- Description -->
                <div class="max-w-4xl mx-auto mb-16">
                    <p class="text-lg md:text-xl text-gray-700 leading-relaxed mb-4 nepali-text">
                        कनकाईको पहिलो अत्याधुनिक फुटसल अनुभव गर्नुहोस् — जहाँ तपाईंको खेल कौशल, उत्साह र समुदायको भावना
                        एकै ठाउँमा भेटिन्छ।
                    </p>
                    <p class="text-xl md:text-2xl font-semibold text-futsal-green nepali-text">
                        बुक गर्नुहोस्, खेल्नुहोस्, र आफूलाई प्रो खेलाडी जस्तै महसुस गर्नुहोस्! ⚽
                    </p>
                </div>

                <!-- Cards Grid -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 lg:gap-10">
                    <!-- Card 1 -->
                    <div
                        class="card-hover card-border rounded-2xl p-8 text-center relative overflow-hidden group bg-white shadow-lg transition-transform duration-300 hover:scale-105 hover:shadow-2xl">
                        <!-- Hover Gradient Background -->
                        <div
                            class="absolute inset-0 bg-gradient-to-br from-futsal-green/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 rounded-2xl">
                        </div>

                        <div class="relative z-10">
                            <!-- Icon Container -->
                            <div
                                class="w-20 h-20 rounded-full mx-auto mb-6 bg-gradient-to-br from-futsal-orange to-futsal-green flex items-center justify-center shadow-lg group-hover:shadow-xl transition-shadow duration-300">
                                <i class="fas fa-trophy text-white text-4xl drop-shadow-lg"></i>
                            </div>

                            <h3 class="text-xl font-bold text-futsal-green mb-3">Premium Facilities</h3>
                            <p class="text-gray-600 leading-relaxed">
                                Top-tier synthetic turf, professional lighting, and pro-standard futsal experience.
                            </p>

                            <div class="mt-4 flex justify-center space-x-4 text-xs text-futsal-green/70">
                                <span class="flex items-center">
                                    <i class="fas fa-check-circle mr-1"></i>
                                    FIFA Quality
                                </span>
                                <span class="flex items-center">
                                    <i class="fas fa-check-circle mr-1"></i>
                                    LED Lights
                                </span>
                            </div>
                        </div>
                    </div>

                    <!-- Card 2 -->
                    <div
                        class="card-hover card-border rounded-2xl p-8 text-center relative overflow-hidden group bg-white shadow-lg transition-transform duration-300 hover:scale-105 hover:shadow-2xl">
                        <div
                            class="absolute inset-0 bg-gradient-to-br from-futsal-orange/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 rounded-2xl">
                        </div>

                        <div class="relative z-10">
                            <div
                                class="w-20 h-20 rounded-full mx-auto mb-6 bg-gradient-to-br from-futsal-orange to-futsal-green flex items-center justify-center shadow-lg group-hover:shadow-xl transition-shadow duration-300">
                                <i class="fas fa-clock text-white text-4xl drop-shadow-lg"></i>
                            </div>

                            <h3 class="text-xl font-bold text-futsal-green mb-3">Flexible Booking</h3>
                            <p class="text-gray-600 leading-relaxed">
                                Open 6 AM to 10 PM daily with easy online booking and walk-in support.
                            </p>

                            <div class="mt-4 flex justify-center space-x-4 text-xs text-futsal-green/70">
                                <span class="flex items-center">
                                    <i class="fas fa-check-circle mr-1"></i>
                                    16 Hours
                                </span>
                                <span class="flex items-center">
                                    <i class="fas fa-check-circle mr-1"></i>
                                    Online/Walk-in
                                </span>
                            </div>
                        </div>
                    </div>

                    <!-- Card 3 -->
                    <div
                        class="card-hover card-border rounded-2xl p-8 text-center relative overflow-hidden group bg-white shadow-lg transition-transform duration-300 hover:scale-105 hover:shadow-2xl">
                        <div
                            class="absolute inset-0 bg-gradient-to-br from-futsal-orange/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 rounded-2xl">
                        </div>

                        <div class="relative z-10">
                            <div
                                class="w-20 h-20 rounded-full mx-auto mb-6 bg-gradient-to-br from-futsal-orange to-futsal-green flex items-center justify-center shadow-lg group-hover:shadow-xl transition-shadow duration-300">
                                <i class="fas fa-users text-white text-4xl drop-shadow-lg"></i>
                            </div>

                            <h3 class="text-xl font-bold text-futsal-green mb-3">Local Community</h3>
                            <p class="text-gray-600 leading-relaxed">
                                Join leagues, tournaments, and friendly matches with Jhapa's best players.
                            </p>

                            <div class="mt-4 flex justify-center space-x-4 text-xs text-futsal-green/70">
                                <span class="flex items-center">
                                    <i class="fas fa-check-circle mr-1"></i>
                                    Tournaments
                                </span>
                                <span class="flex items-center">
                                    <i class="fas fa-check-circle mr-1"></i>
                                    Leagues
                                </span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Call-to-Action Button -->
                <div class="mt-16">
                    <button
                        class="inline-flex items-center bg-gradient-to-r from-futsal-green to-futsal-orange rounded-full px-8 py-4 text-white font-semibold shadow-2xl hover:shadow-3xl transition-all duration-300 hover:scale-105 cursor-pointer">
                        <i class="fas fa-calendar-plus mr-3"></i>
                        <span>Book Your Court Today</span>
                        <i class="fas fa-arrow-right ml-3"></i>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="py-20 bg-futsal-gray">
        <div class="container mx-auto px-4">
            <div class="text-center mb-20">
                <!-- Animated Subheading Badge -->
                <div
                    class="inline-flex items-center bg-white/60 backdrop-blur-sm rounded-full px-4 py-2 mb-4 border border-white/20">
                    <div class="w-2 h-2 bg-futsal-orange rounded-full mr-2 animate-pulse"></div>
                    <span class="text-futsal-green font-semibold text-sm uppercase tracking-widest">
                        Contact Us
                    </span>
                </div>

                <!-- Main Heading -->
                <h2 class="text-4xl md:text-5xl font-extrabold text-futsal-green mb-4 leading-tight">
                    Let's <span class="text-futsal-orange">Get In Touch</span>
                </h2>

                <!-- Decorative Divider -->
                <div class="flex items-center justify-center mb-6">
                    <div class="h-1 w-12 bg-gradient-to-r from-futsal-green to-futsal-orange rounded-full"></div>
                    <div class="w-3 h-3 bg-futsal-orange rounded-full mx-3 animate-bounce"></div>
                    <div class="h-1 w-12 bg-gradient-to-l from-futsal-green to-futsal-orange rounded-full"></div>
                </div>

                <!-- Description Text -->
                <p class="text-lg md:text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed">
                    Ready to book your court or have questions? We're here to help you start your <span
                        class="font-semibold text-futsal-green">futsal journey</span> with confidence and ease.
                </p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 max-w-6xl mx-auto">
                <!-- Contact Form -->
                <div class="bg-white rounded-xl shadow-lg p-8">
                    <h3 class="text-2xl font-semibold text-futsal-green mb-6">Send us a Message</h3>
                    <form id="contact-form" class="space-y-6">
                        {% csrf_token %}
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="firstName" class="block text-sm font-medium text-gray-700 mb-2">First
                                    Name *</label>
                                <input type="text" id="firstName" name="firstName" required
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-futsal-orange focus:border-transparent">
                            </div>
                            <div>
                                <label for="lastName" class="block text-sm font-medium text-gray-700 mb-2">Last
                                    Name *</label>
                                <input type="text" id="lastName" name="lastName" required
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-futsal-orange focus:border-transparent">
                            </div>
                        </div>
                        <div>
                            <label for="email" class="block text-sm font-medium text-gray-700 mb-2">Email *</label>
                            <input type="email" id="email" name="email" required
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-futsal-orange focus:border-transparent">
                        </div>
                        <div>
                            <label for="phone" class="block text-sm font-medium text-gray-700 mb-2">Phone Number</label>
                            <input type="tel" id="phone" name="phone"
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-futsal-orange focus:border-transparent">
                        </div>
                        <div>
                            <label for="subject" class="block text-sm font-medium text-gray-700 mb-2">Subject *</label>
                            <select id="subject" name="subject" required
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-futsal-orange focus:border-transparent">
                                <option value="">Select a subject</option>
                                <option value="booking">Court Booking</option>
                                <option value="facilities">Facilities Inquiry</option>
                                <option value="tournament">Tournament Information</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div>
                            <label for="message" class="block text-sm font-medium text-gray-700 mb-2">Message *</label>
                            <textarea id="message" name="message" rows="4" required
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-futsal-orange focus:border-transparent"></textarea>
                        </div>
                        <button type="submit" id="submit-btn"
                            class="w-full bg-futsal-orange text-white py-3 px-6 rounded-lg font-semibold hover:bg-orange-600 transition-colors relative">
                            <span class="btn-text">Send Message</span>
                            <div class="loading-spinner hidden"></div>
                        </button>
                    </form>
                </div>

                <!-- Contact Information -->
                <div class="space-y-8">
                    <div class="bg-white rounded-xl shadow-lg p-8">
                        <h3 class="text-2xl font-semibold text-futsal-green mb-6">Contact Information</h3>
                        <div class="space-y-4">
                            <div class="flex items-start space-x-4">
                                <div class="bg-futsal-orange text-white p-3 rounded-lg">
                                    <i class="fas fa-map-marker-alt"></i>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-gray-900">Address</h4>
                                    <p class="text-gray-600">123 Sports Complex Drive<br>Futsal City, FC 12345</p>
                                </div>
                            </div>
                            <div class="flex items-start space-x-4">
                                <div class="bg-futsal-orange text-white p-3 rounded-lg">
                                    <i class="fas fa-phone"></i>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-gray-900">Phone</h4>
                                    <p class="text-gray-600">+1 (555) 123-4567</p>
                                </div>
                            </div>
                            <div class="flex items-start space-x-4">
                                <div class="bg-futsal-orange text-white p-3 rounded-lg">
                                    <i class="fas fa-envelope"></i>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-gray-900">Email</h4>
                                    <p class="text-gray-600">info@futsalpro.com</p>
                                </div>
                            </div>
                            <div class="flex items-start space-x-4">
                                <div class="bg-futsal-orange text-white p-3 rounded-lg">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-gray-900">Operating Hours</h4>
                                    <p class="text-gray-600">
                                        Mon - Fri: 6:00 AM - 11:00 PM<br>
                                        Sat - Sun: 7:00 AM - 10:00 PM
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Map Placeholder -->
                    <div class="bg-white rounded-xl shadow-lg p-8">
                        <h3 class="text-2xl font-semibold text-futsal-green mb-6">Find Us</h3>
                        <div class="rounded-xl overflow-hidden shadow-lg">
                            <iframe class="w-full h-64 sm:h-80" loading="lazy" style="border:0" allowfullscreen
                                referrerpolicy="no-referrer-when-downgrade"
                                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3531.5160637645557!2d87.73987437522428!3d26.49869227686648!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x39ef6b0e2a8ac313%3A0xc362ba6619c12f6a!2sSurunga%2C%20kanakai%20Municipality%2C%20Jhapa!5e0!3m2!1sen!2snp!4v1682959999999!5m2!1sen!2snp">
                            </iframe>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    {% include 'includes/footer.html' %}

    <!-- JavaScript -->
    <script>
        // Get CSRF token from Django
        function getCookie(name) {
            let cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                const cookies = document.cookie.split(';');
                for (let i = 0; i < cookies.length; i++) {
                    const cookie = cookies[i].trim();
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }

        // Show notification message
        function showMessage(message, type = 'success') {
            const messageContainer = document.getElementById('message-container');

            // Remove any existing messages
            const existingMessages = messageContainer.querySelectorAll('.message-notification');
            existingMessages.forEach(msg => msg.remove());

            // Create new message element
            const messageEl = document.createElement('div');
            messageEl.className = `message-notification message-${type}`;

            // Set icon based on message type
            let icon = '';
            switch (type) {
                case 'success':
                    icon = '<i class="fas fa-check-circle"></i>';
                    break;
                case 'error':
                    icon = '<i class="fas fa-exclamation-circle"></i>';
                    break;
                case 'warning':
                    icon = '<i class="fas fa-exclamation-triangle"></i>';
                    break;
                default:
                    icon = '<i class="fas fa-info-circle"></i>';
            }

            messageEl.innerHTML = `
                ${icon}
                <span>${message}</span>
                <button onclick="this.parentElement.remove()" class="ml-auto text-white hover:text-gray-200">
                    <i class="fas fa-times"></i>
                </button>
            `;

            messageContainer.appendChild(messageEl);

            // Show message with animation
            setTimeout(() => {
                messageEl.classList.add('show');
            }, 100);

            // Auto-hide after 5 seconds
            setTimeout(() => {
                if (messageEl && messageEl.parentElement) {
                    messageEl.classList.remove('show');
                    setTimeout(() => {
                        if (messageEl && messageEl.parentElement) {
                            messageEl.remove();
                        }
                    }, 300);
                }
            }, 5000);
        }

        // Set button loading state
        function setButtonLoading(isLoading) {
            const submitBtn = document.getElementById('submit-btn');
            const btnText = submitBtn.querySelector('.btn-text');
            const spinner = submitBtn.querySelector('.loading-spinner');
            const form = document.getElementById('contact-form');

            if (isLoading) {
                submitBtn.classList.add('btn-loading');
                btnText.style.opacity = '0';
                spinner.classList.remove('hidden');
                form.classList.add('form-submitting');
                submitBtn.disabled = true;
            } else {
                submitBtn.classList.remove('btn-loading');
                btnText.style.opacity = '1';
                spinner.classList.add('hidden');
                form.classList.remove('form-submitting');
                submitBtn.disabled = false;
            }
        }

        // Mobile Menu Toggle
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');

        if (mobileMenuBtn && mobileMenu) {
            mobileMenuBtn.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
        }

        // Contact Form Submission
        const contactForm = document.getElementById('contact-form');
        const csrftoken = getCookie('csrftoken');

        contactForm.addEventListener('submit', async function (e) {
            e.preventDefault();

            // Basic form validation
            const firstName = document.getElementById('firstName').value.trim();
            const lastName = document.getElementById('lastName').value.trim();
            const email = document.getElementById('email').value.trim();
            const subject = document.getElementById('subject').value;
            const message = document.getElementById('message').value.trim();

            if (!firstName || !lastName || !email || !subject || !message) {
                showMessage('Please fill in all required fields.', 'warning');
                return;
            }

            // Email validation
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                showMessage('Please enter a valid email address.', 'error');
                return;
            }

            // Set loading state
            setButtonLoading(true);

            // Prepare form data
            const formData = new FormData();
            formData.append('firstName', firstName);
            formData.append('lastName', lastName);
            formData.append('email', email);
            formData.append('phone', document.getElementById('phone').value.trim());
            formData.append('subject', subject);
            formData.append('message', message);

            try {
                // Submit form to Django API
                const response = await fetch('/api/contact/', {
                    method: 'POST',
                    body: formData,
                    headers: {
                        'X-CSRFToken': csrftoken,
                    },
                });

                const data = await response.json();

                if (response.ok) {
                    // Success
                    showMessage(data.message || 'Thank you for your message! We will get back to you soon.', 'success');
                    contactForm.reset();
                } else {
                    // Error from server
                    if (data.errors) {
                        // Handle field-specific errors
                        let errorMessage = 'Please correct the following errors:\n';
                        for (const [field, errors] of Object.entries(data.errors)) {
                            errorMessage += `• ${errors.join(', ')}\n`;
                        }
                        showMessage(errorMessage, 'error');
                    } else {
                        showMessage(data.message || 'Something went wrong. Please try again.', 'error');
                    }
                }

            } catch (error) {
                console.error('Error submitting form:', error);
                showMessage('Network error. Please check your connection and try again.', 'error');
            } finally {
                // Remove loading state
                setButtonLoading(false);
            }
        });

        // Add real-time validation
        function addFieldValidation() {
            const emailField = document.getElementById('email');
            const phoneField = document.getElementById('phone');

            // Email validation on blur
            emailField.addEventListener('blur', function () {
                const email = this.value.trim();
                if (email && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
                    this.classList.add('border-red-500');
                    this.classList.remove('border-gray-300');
                } else {
                    this.classList.remove('border-red-500');
                    this.classList.add('border-gray-300');
                }
            });

            // Phone validation (optional, for international numbers)
            phoneField.addEventListener('blur', function () {
                const phone = this.value.trim();
                if (phone && !/^[\+]?[1-9][\d]{0,15}$/.test(phone.replace(/[\s\-\(\)]/g, ''))) {
                    this.classList.add('border-yellow-500');
                    this.classList.remove('border-gray-300');
                } else {
                    this.classList.remove('border-yellow-500');
                    this.classList.add('border-gray-300');
                }
            });

            // Remove validation styling on focus
            const formFields = contactForm.querySelectorAll('input, select, textarea');
            formFields.forEach(field => {
                field.addEventListener('focus', function () {
                    this.classList.remove('border-red-500', 'border-yellow-500');
                    this.classList.add('border-gray-300');
                });
            });
        }

        // Initialize field validation
        addFieldValidation();

        // Handle form reset
        function resetForm() {
            contactForm.reset();
            const formFields = contactForm.querySelectorAll('input, select, textarea');
            formFields.forEach(field => {
                field.classList.remove('border-red-500', 'border-yellow-500');
                field.classList.add('border-gray-300');
            });
        }

        // Add a reset button handler if needed
        const resetBtn = document.getElementById('reset-btn');
        if (resetBtn) {
            resetBtn.addEventListener('click', resetForm);
        }
    </script>
</body>

</html>